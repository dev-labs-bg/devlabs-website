(function(e){e.superscrollorama=function(t){function c(){i.scroll(function(){a=true});TweenLite.ticker.addEventListener("tick",p)}function h(e){var t={top:parseFloat(e.css("top")),left:parseFloat(e.css("left"))};if(isNaN(t.top)){t.top=0}if(isNaN(t.left)){t.left=0}return t}function p(){if(a){m();a=false}}function d(e){e.el.css("position",e.origPositioning.pos);e.el.css("top",e.origPositioning.top);e.el.css("left",e.origPositioning.left)}function v(e,t){if(e){if(e.totalProgress){e.totalProgress(t).pause()}else{e.progress(t).pause()}}}function m(){var t=n.settings.isVertical?i.scrollTop()+u.y:i.scrollLeft()+u.x;var r=n.settings.triggerAtCenter?n.settings.isVertical?-i.height()/2:-i.width()/2:0;var a,l,c;var p=s.length;for(a=0;a<p;a++){var m=s[a],g=m.target,y=m.offset;if(typeof g==="string"){f=e(g).offset()||{};l=n.settings.isVertical?f.top+u.y:f.left+u.x;y+=r}else if(typeof g==="number"){l=g}else if(e.isFunction(g)){l=g.call(this)}else{f=g.offset();l=n.settings.isVertical?f.top+u.y:f.left+u.x;y+=r}l+=y;c=l+m.dur;if(t>l&&t<c&&m.state!=="TWEENING"){m.state="TWEENING";m.start=l;m.end=c}if(t<l&&m.state!=="BEFORE"&&m.reverse){if(n.settings.playoutAnimations||m.dur===0){m.tween.reverse()}else{v(m.tween,0)}m.state="BEFORE"}else if(t>c&&m.state!=="AFTER"){if(n.settings.playoutAnimations||m.dur===0){m.tween.play()}else{v(m.tween,1)}m.state="AFTER"}else if(m.state==="TWEENING"){var b=false;if(m.tween.repeat){b=m.tween.repeat()===-1}if(b){var w=m.tween.totalProgress();if(m.playeadLastPosition===null||w===m.playeadLastPosition){if(w===1){if(m.tween.yoyo()){m.tween.reverse()}else{m.tween.totalProgress(0).play()}}else{m.tween.play()}}m.playeadLastPosition=w}else{v(m.tween,(t-m.start)/(m.end-m.start))}}}var E=o.length;for(a=0;a<E;a++){var S=o[a];var x=S.el;if(S.state!=="PINNED"){var T=S.spacer.offset();if(S.state==="UPDATE"){d(S)}l=n.settings.isVertical?T.top+u.y:T.left+u.x;l+=S.offset;c=l+S.dur;var N=t>c&&S.state==="BEFORE"||t<l&&S.state==="AFTER";var C=t>l&&t<c;if(C||N){if(S.pushFollowers&&x.css("position")==="static"){x.css("position","relative")}S.origPositioning={pos:x.css("position"),top:S.spacer.css("top"),left:S.spacer.css("left")};S.fixedPositioning={top:n.settings.isVertical?-S.offset:T.top,left:n.settings.isVertical?T.left:-S.offset};x.css("position","fixed");x.css("top",S.fixedPositioning.top);x.css("left",S.fixedPositioning.left);S.pinStart=l;S.pinEnd=c;if(S.pushFollowers){if(n.settings.isVertical){S.spacer.height(S.dur+x.outerHeight(true))}else{S.spacer.width(S.dur+x.outerWidth(true))}}else{if(S.origPositioning.pos==="absolute"){S.spacer.width(0);S.spacer.height(0)}else{if(n.settings.isVertical){S.spacer.height(x.outerHeight(true))}else{S.spacer.width(x.outerWidth(true))}}}if(S.state==="UPDATE"){if(S.anim){v(S.anim,0)}}else if(S.onPin){S.onPin(S.state==="AFTER")}S.state="PINNED"}}if(S.state==="PINNED"){if(t<S.pinStart||t>S.pinEnd){var k=t<S.pinStart;S.state=k?"BEFORE":"AFTER";v(S.anim,k?0:1);var L=k?0:S.dur;if(n.settings.isVertical){S.spacer.height(S.pushFollowers?L:0)}else{S.spacer.width(S.pushFollowers?L:0)}var A=S.fixedPositioning.top-h(S.el).top;var O=S.fixedPositioning.left-h(S.el).left;d(S);if(!S.pushFollowers||S.origPositioning.pos==="absolute"){var M;if(S.origPositioning.pos==="relative"){M=n.settings.isVertical?parseFloat(S.origPositioning.top):parseFloat(S.origPositioning.left);if(isNaN(M)){M=0}}else{M=n.settings.isVertical?S.spacer.position().top:S.spacer.position().left}var _=n.settings.isVertical?"top":"left";S.el.css(_,M+L)}if(A!==0){S.el.css("top",h(S.el).top-A)}if(O!==0){S.el.css("left",h(S.el).left-O)}if(S.onUnpin){S.onUnpin(!k)}}else if(S.anim){v(S.anim,(t-S.pinStart)/(S.pinEnd-S.pinStart))}}}}var n=this;var r={isVertical:true,triggerAtCenter:true,playoutAnimations:true,reverse:true};n.settings=e.extend({},r,t);var i=e(window);var s=[],o=[],u={x:0,y:0},a=false,f,l;n.addTween=function(e,t,r,i,o){t.pause();s.push({target:e,tween:t,offset:i||0,dur:r||0,reverse:typeof o!=="undefined"?o:n.settings.reverse,state:"BEFORE"});return n};n.pin=function(t,r,i){if(typeof t==="string"){t=e(t)}var s={offset:0,pushFollowers:true};i=e.extend({},s,i);if(i.anim){i.anim.pause()}var u=e('<div class="superscrollorama-pin-spacer"></div>');u.css("position","relative");u.css("top",t.css("top"));u.css("left",t.css("left"));t.before(u);o.push({el:t,state:"BEFORE",dur:r,offset:i.offset,anim:i.anim,pushFollowers:i.pushFollowers,spacer:u,onPin:i.onPin,onUnpin:i.onUnpin});return n};n.updatePin=function(t,r,i){if(typeof t==="string"){t=e(t)}if(i.anim){i.anim.pause()}var s=o.length;for(l=0;l<s;l++){var u=o[l];if(t.get(0)===u.el.get(0)){if(r){u.dur=r}if(i.anim){u.anim=i.anim}if(i.offset){u.offset=i.offset}if(typeof i.pushFollowers!=="undefined"){u.pushFollowers=i.pushFollowers}if(i.onPin){u.onPin=i.onPin}if(i.onUnpin){u.onUnpin=i.onUnpin}if((r||i.anim||i.offset)&&u.state==="PINNED"){u.state="UPDATE";m()}}}return n};n.removeTween=function(e,t,r){var i=s.length;if(typeof r==="undefined"){r=true}for(var o=0;o<i;o++){var u=s[o];if(u.target===e&&(!t||u.tween===t)){s.splice(o,1);if(r){v(u.tween,0)}i--;o--}}return n};n.removePin=function(t,r){if(typeof t==="string"){t=e(t)}if(typeof r==="undefined"){r=true}var i=o.length;for(var s=0;s<i;s++){var u=o[s];if(u.el.is(t)){o.splice(s,1);if(r){u.spacer.remove();d(u);if(u.anim){v(u.anim,0)}}i--;s--}}return n};n.setScrollContainerOffset=function(e,t){u.x=e;u.y=t;return n};n.triggerCheckAnim=function(e){if(e){m()}else{a=true}return n};c();return n}})(jQuery)